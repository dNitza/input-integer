<link rel="import" href="../src/bower_components/polymer/polymer.html">
<!-- <link rel="import" href="../polymer/polymer.html"> -->

<link rel="import" href="input-integer-increment.html">
<link rel="import" href="input-integer-decrement.html">

<polymer-element name="input-integer" extends="input" attributes="min max name value pattern">
    <template>
        <style>
        :host {
          display: inline-block;
          border: none;
        }
        #input_integer {
          text-align: right;
        }
        </style>
        <button on-click="{{decrement}}">-</button>
        <input is="core-input" id="input_integer" name="{{name}}" type="text" pattern="{{pattern}}" value="{{value}}" on-mousewheel="{{scrolling}}" on-keydown="{{keypress}}" autocomplete="off"/>
        <button on-click="{{increment}}">+</button>
    </template>

    <script>
        Polymer('input-integer', {
            value: Number(this.value),

            default_max: Number.POSITIVE_INFINITY,

            default_min: Number.NEGATIVE_INFINITY,

            domReady: function() {
                this.$.input_integer.max = this.max || this.default_max;
                this.$.input_integer.min = this.min || this.default_min;
            },

            increment: function(e, detail, sender){
                if( ! this.$.input_integer.value){this.$.input_integer.value = 0}
                if(Number(this.$.input_integer.value) < this.$.input_integer.max){
                    var newVal = Number(this.$.input_integer.value) + 1;
                    this.$.input_integer.value = newVal;
                    this.value = newVal;
                }
            },

            decrement: function(e, detail, sender){
                if( ! this.$.input_integer.value){this.$.input_integer.value = 0}
                if(Number(this.$.input_integer.value) > this.$.input_integer.min){
                    var newVal = Number(this.$.input_integer.value) - 1;
                    this.$.input_integer.value = newVal;
                    this.value = newVal;
                }
            },

            scrolling: function(e){
                if(e.deltaY > 0){
                    this.increment();
                }

                if(e.deltaY < -1){
                    this.decrement();
                }
            },

            keypress: function(e){
                if(e.keyCode === 38){
                    this.increment();
                }
                if(e.keyCode === 40){
                    this.decrement();
                }
            }
        });
    </script>

</polymer-element>
